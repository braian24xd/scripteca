{"ast":null,"code":"import _objectSpread from\"C:/Users/braya/OneDrive/Escritorio/scripteca/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ManageRecordings=()=>{const[recordings,setRecordings]=useState([]);const[newRecording,setNewRecording]=useState({title:\"\",description:\"\",url:\"\",date:\"\"// Nuevo campo para la fecha\n});const[editRecording,setEditRecording]=useState(null);const fetchRecordings=async()=>{try{const token=localStorage.getItem(\"token\");const response=await axios.get(\"http://localhost:5000/api/recordings\",{headers:{Authorization:\"Bearer \".concat(token)}});// Convertimos la fecha en un formato legible antes de guardarla en el estado\nconst formattedRecordings=response.data.map(rec=>_objectSpread(_objectSpread({},rec),{},{formattedDate:rec.createdAt?new Date(rec.createdAt).toLocaleDateString(\"es-ES\"):\"Fecha no disponible\"}));setRecordings(formattedRecordings);}catch(error){console.error(\"Error fetching recordings:\",error);}};const handleAddRecording=async()=>{try{const token=localStorage.getItem(\"token\");await axios.post(\"http://localhost:5000/api/recordings\",newRecording,{headers:{Authorization:\"Bearer \".concat(token)}});fetchRecordings();setNewRecording({title:\"\",description:\"\",url:\"\",date:\"\"});}catch(error){console.error(\"Error adding recording:\",error);}};const handleEditRecording=async id=>{try{const token=localStorage.getItem(\"token\");await axios.put(\"http://localhost:5000/api/recordings/\".concat(id),editRecording,{headers:{Authorization:\"Bearer \".concat(token)}});fetchRecordings();setEditRecording(null);}catch(error){console.error(\"Error editing recording:\",error);}};const handleDeleteRecording=async id=>{try{const token=localStorage.getItem(\"token\");await axios.delete(\"http://localhost:5000/api/recordings/\".concat(id),{headers:{Authorization:\"Bearer \".concat(token)}});fetchRecordings();}catch(error){console.error(\"Error deleting recording:\",error);}};useEffect(()=>{fetchRecordings();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Gestionar Grabaciones\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Agregar Nueva Grabaci\\xF3n\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"T\\xEDtulo\",value:newRecording.title,onChange:e=>setNewRecording(_objectSpread(_objectSpread({},newRecording),{},{title:e.target.value})),required:true}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Descripci\\xF3n\",value:newRecording.description,onChange:e=>setNewRecording(_objectSpread(_objectSpread({},newRecording),{},{description:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"URL del video\",value:newRecording.url,onChange:e=>setNewRecording(_objectSpread(_objectSpread({},newRecording),{},{url:e.target.value})),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:newRecording.date,onChange:e=>setNewRecording(_objectSpread(_objectSpread({},newRecording),{},{date:e.target.value})),required:true}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddRecording,children:\"Agregar\"})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Lista de Grabaciones\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"T\\xEDtulo\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Fecha\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:recordings.map(recording=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:editRecording&&editRecording._id===recording._id?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editRecording.title,onChange:e=>setEditRecording(_objectSpread(_objectSpread({},editRecording),{},{title:e.target.value}))}):recording.title}),/*#__PURE__*/_jsx(\"td\",{children:editRecording&&editRecording._id===recording._id?/*#__PURE__*/_jsx(\"textarea\",{value:editRecording.description,onChange:e=>setEditRecording(_objectSpread(_objectSpread({},editRecording),{},{description:e.target.value}))}):recording.description}),/*#__PURE__*/_jsx(\"td\",{children:recording.formattedDate}),/*#__PURE__*/_jsxs(\"td\",{children:[editRecording&&editRecording._id===recording._id?/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditRecording(recording._id),children:\"Guardar\"}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditRecording(recording),children:\"Editar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteRecording(recording._id),children:\"Eliminar\"})]})]},recording._id))})]})]});};export default ManageRecordings;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","ManageRecordings","recordings","setRecordings","newRecording","setNewRecording","title","description","url","date","editRecording","setEditRecording","fetchRecordings","token","localStorage","getItem","response","get","headers","Authorization","concat","formattedRecordings","data","map","rec","_objectSpread","formattedDate","createdAt","Date","toLocaleDateString","error","console","handleAddRecording","post","handleEditRecording","id","put","handleDeleteRecording","delete","children","type","placeholder","value","onChange","e","target","required","onClick","recording","_id"],"sources":["C:/Users/braya/OneDrive/Escritorio/scripteca/frontend/src/pages/ManageRecordings.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst ManageRecordings = () => {\r\n  const [recordings, setRecordings] = useState([]);\r\n  const [newRecording, setNewRecording] = useState({\r\n    title: \"\",\r\n    description: \"\",\r\n    url: \"\",\r\n    date: \"\", // Nuevo campo para la fecha\r\n  });\r\n  const [editRecording, setEditRecording] = useState(null);\r\n\r\n  const fetchRecordings = async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const response = await axios.get(\"http://localhost:5000/api/recordings\", {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      // Convertimos la fecha en un formato legible antes de guardarla en el estado\r\n      const formattedRecordings = response.data.map((rec) => ({\r\n        ...rec,\r\n        formattedDate: rec.createdAt\r\n          ? new Date(rec.createdAt).toLocaleDateString(\"es-ES\")\r\n          : \"Fecha no disponible\",\r\n      }));\r\n\r\n      setRecordings(formattedRecordings);\r\n    } catch (error) {\r\n      console.error(\"Error fetching recordings:\", error);\r\n    }\r\n  };\r\n\r\n  const handleAddRecording = async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      await axios.post(\"http://localhost:5000/api/recordings\", newRecording, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      fetchRecordings();\r\n      setNewRecording({ title: \"\", description: \"\", url: \"\", date: \"\" });\r\n    } catch (error) {\r\n      console.error(\"Error adding recording:\", error);\r\n    }\r\n  };\r\n\r\n  const handleEditRecording = async (id) => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      await axios.put(`http://localhost:5000/api/recordings/${id}`, editRecording, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      fetchRecordings();\r\n      setEditRecording(null);\r\n    } catch (error) {\r\n      console.error(\"Error editing recording:\", error);\r\n    }\r\n  };\r\n\r\n  const handleDeleteRecording = async (id) => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      await axios.delete(`http://localhost:5000/api/recordings/${id}`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      fetchRecordings();\r\n    } catch (error) {\r\n      console.error(\"Error deleting recording:\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchRecordings();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <h2>Gestionar Grabaciones</h2>\r\n\r\n      {/* Formulario para agregar nueva grabación */}\r\n      <div>\r\n        <h3>Agregar Nueva Grabación</h3>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Título\"\r\n          value={newRecording.title}\r\n          onChange={(e) => setNewRecording({ ...newRecording, title: e.target.value })}\r\n          required\r\n        />\r\n        <textarea\r\n          placeholder=\"Descripción\"\r\n          value={newRecording.description}\r\n          onChange={(e) => setNewRecording({ ...newRecording, description: e.target.value })}\r\n        ></textarea>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"URL del video\"\r\n          value={newRecording.url}\r\n          onChange={(e) => setNewRecording({ ...newRecording, url: e.target.value })}\r\n          required\r\n        />\r\n        <input\r\n          type=\"date\"\r\n          value={newRecording.date}\r\n          onChange={(e) => setNewRecording({ ...newRecording, date: e.target.value })}\r\n          required\r\n        />\r\n        <button onClick={handleAddRecording}>Agregar</button>\r\n      </div>\r\n\r\n      {/* Lista de grabaciones */}\r\n      <h3>Lista de Grabaciones</h3>\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Título</th>\r\n            <th>Descripción</th>\r\n            <th>Fecha</th>\r\n            <th>Acciones</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {recordings.map((recording) => (\r\n            <tr key={recording._id}>\r\n              <td>\r\n                {editRecording && editRecording._id === recording._id ? (\r\n                  <input\r\n                    type=\"text\"\r\n                    value={editRecording.title}\r\n                    onChange={(e) =>\r\n                      setEditRecording({ ...editRecording, title: e.target.value })\r\n                    }\r\n                  />\r\n                ) : (\r\n                  recording.title\r\n                )}\r\n              </td>\r\n              <td>\r\n                {editRecording && editRecording._id === recording._id ? (\r\n                  <textarea\r\n                    value={editRecording.description}\r\n                    onChange={(e) =>\r\n                      setEditRecording({ ...editRecording, description: e.target.value })\r\n                    }\r\n                  ></textarea>\r\n                ) : (\r\n                  recording.description\r\n                )}\r\n              </td>\r\n              <td>{recording.formattedDate}</td>\r\n              <td>\r\n                {editRecording && editRecording._id === recording._id ? (\r\n                  <button onClick={() => handleEditRecording(recording._id)}>Guardar</button>\r\n                ) : (\r\n                  <button onClick={() => setEditRecording(recording)}>Editar</button>\r\n                )}\r\n                <button onClick={() => handleDeleteRecording(recording._id)}>Eliminar</button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManageRecordings;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}